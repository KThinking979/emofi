"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[257],{70712:(e,a,r)=>{r.d(a,{kg:()=>o,Y_:()=>i,wz:()=>c,yg:()=>u,uI:()=>d,TK:()=>l});var n=r(66220);const s=(0,r(90815).Wp)({apiKey:"AIzaSyDObaXpbUavftTDCAhFmn23akCVpB4cH80",authDomain:"emofi-899d2.firebaseapp.com",projectId:"emofi-899d2",storageBucket:"emofi-899d2.appspot.com",messagingSenderId:"1099226012033",appId:"1:1099226012033:web:2f45b63625daf850bc7080",measurementId:"G-JLXM3H2L66"}),t=(0,n.aU)(s),i=async()=>{try{let e;const a=(0,n.H9)(t,"configs","configs"),r=await(0,n.x7)(a);return r.exists()&&(e=r.data()),e}catch(e){console.error("Error getUser: ",e)}},o=async e=>{let{id:a,username:r,emoFiCoins:s}=e;try{await(0,n.BN)((0,n.H9)(t,"users","".concat(a)),{id:"".concat(a),username:r,emoFiCoins:s,language:"en",faceEmo:"S0",emojis:["S0"],anys:[],skills:[],cards:[],createdAt:new Date,updateAt:new Date})}catch(i){console.error("Error createUser: ",i)}},c=async e=>{try{let a;const r=(0,n.H9)(t,"users","".concat(e)),s=await(0,n.x7)(r);return s.exists()&&(a=s.data()),a}catch(a){console.error("Error getUser: ",a)}},l=async e=>{let{id:a,coins:r,faceEmo:s}=e;try{let e={};null!==r&&void 0!==r&&(e={...e,emoFiCoins:r}),s&&(e={...e,faceEmo:s}),await(0,n.mZ)((0,n.H9)(t,"users","".concat(a)),{...e,updateAt:new Date})}catch(i){console.error("Error updateCoinsUser: ",i)}},d=async e=>{let{id:a,emojis:r}=e;try{await(0,n.mZ)((0,n.H9)(t,"users","".concat(a)),{emojis:r,updateAt:new Date})}catch(s){console.error("Error updateCoinsUser: ",s)}},u=async e=>{let{id:a,anys:r}=e;try{await(0,n.mZ)((0,n.H9)(t,"users","".concat(a)),{anys:r,updateAt:new Date})}catch(s){console.error("Error updateCoinsUser: ",s)}}},37257:(e,a,r)=>{r.r(a),r.d(a,{WalletPage:()=>I});var n=r(9950),s=r(76455),t=r(63247),i=r(61530),o=r(97681),c=r(58039),l=r(26306),d=r(44414);(0,c.R)((function(e,a){const{spacing:r="0.5rem",spacingX:s,spacingY:t,children:i,justify:c,direction:m,align:g,className:f,shouldWrapChildren:p,...h}=e,x=(0,n.useMemo)((()=>p?n.Children.map(i,((e,a)=>(0,d.jsx)(u,{children:e},a))):i),[i,p]);return(0,d.jsx)(l.B.div,{ref:a,className:(0,o.cx)("chakra-wrap",f),...h,children:(0,d.jsx)(l.B.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:c,alignItems:g,flexDirection:m,listStyleType:"none",gap:r,columnGap:s,rowGap:t,padding:"0"},children:x})})})).displayName="Wrap";var u=(0,c.R)((function(e,a){const{className:r,...n}=e;return(0,d.jsx)(l.B.li,{ref:a,__css:{display:"flex",alignItems:"flex-start"},className:(0,o.cx)("chakra-wrap__listitem",r),...n})}));u.displayName="WrapItem";var m=r(80221),[g,f]=(0,m.q)({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"});function p(e){var a;const r=e.split(" "),n=null!=(a=r[0])?a:"",s=r.length>1?r[r.length-1]:"";return n&&s?"".concat(n.charAt(0)).concat(s.charAt(0)):n.charAt(0)}function h(e){const{name:a,getInitials:r,...n}=e,s=f();return(0,d.jsx)(l.B.div,{role:"img","aria-label":a,...n,__css:s.label,children:a?null==r?void 0:r(a):null})}h.displayName="AvatarName";var x=e=>(0,d.jsxs)(l.B.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...e,children:[(0,d.jsx)("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),(0,d.jsx)("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]}),y=r(35812);function v(e){const{src:a,srcSet:r,onError:s,onLoad:t,getInitials:i,name:o,borderRadius:c,loading:u,iconLabel:m,icon:g=(0,d.jsx)(x,{}),ignoreFallback:f,referrerPolicy:p,crossOrigin:v}=e,j=(0,y.l)({src:a,onError:s,crossOrigin:v,ignoreFallback:f});return!a||!("loaded"===j)?o?(0,d.jsx)(h,{className:"chakra-avatar__initials",getInitials:i,name:o}):(0,n.cloneElement)(g,{role:"img","aria-label":m}):(0,d.jsx)(l.B.img,{src:a,srcSet:r,alt:o,onLoad:t,referrerPolicy:p,crossOrigin:null!=v?v:void 0,className:"chakra-avatar__img",loading:u,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:c}})}v.displayName="AvatarImage";var j=r(66296),w=r(82867),C={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},b=(0,c.R)(((e,a)=>{const r=(0,j.o5)("Avatar",e),[s,t]=(0,n.useState)(!1),{src:i,srcSet:c,name:u,showBorder:m,borderRadius:f="full",onError:h,onLoad:y,getInitials:b=p,icon:N=(0,d.jsx)(x,{}),iconLabel:k=" avatar",loading:_,children:E,borderColor:A,ignoreFallback:I,crossOrigin:S,referrerPolicy:B,...L}=(0,w.MN)(e),F={borderRadius:f,borderWidth:m?"2px":void 0,...C,...r.container};return A&&(F.borderColor=A),(0,d.jsx)(l.B.span,{ref:a,...L,className:(0,o.cx)("chakra-avatar",e.className),"data-loaded":(0,o.sE)(s),__css:F,children:(0,d.jsxs)(g,{value:r,children:[(0,d.jsx)(v,{src:i,srcSet:c,loading:_,onLoad:(0,o.Hj)(y,(()=>{t(!0)})),onError:h,getInitials:b,name:u,borderRadius:f,icon:N,iconLabel:k,ignoreFallback:I,crossOrigin:S,referrerPolicy:B}),E]})})}));b.displayName="Avatar";var N=r(3731),k=r(22238),_=r(93660),E=r(70712);let A=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const I=()=>{const{user:e}=(0,n.useContext)(k.j8),{setUser:a}=n.useContext(k.LN);(0,n.useEffect)((()=>{r(),(async()=>{var r;const n=null===(r=window.Telegram)||void 0===r?void 0:r.WebApp;if(n&&!e){n.ready();const e=n.initDataUnsafe.user;if(e){let r={id:e.id,username:"".concat(e.last_name," ").concat(e.first_name),emoFiCoins:0};const n=await(0,E.wz)(r.id);n?r={...r,emoFiCoins:n.emoFiCoins}:await(0,E.kg)(r),a(r)}}})()}),[]);const r=async()=>{};return(0,d.jsxs)(t.az,{children:[(0,d.jsxs)(s.mg,{children:[(0,d.jsx)("title",{children:"Wallet"}),(0,d.jsx)("meta",{name:"description",content:"EmoFi"})]}),(0,d.jsxs)(i.B,{h:"100vh",w:A,py:20,px:2,spacing:8,children:[e&&(0,d.jsxs)(i.B,{borderRadius:8,p:2,spacing:4,alignItems:"center",children:[(0,d.jsx)(u,{children:(0,d.jsx)(b,{size:"xl",name:e.username,src:""})}),(0,d.jsx)(N.E,{fontSize:"16px",lineHeight:"20px",fontWeight:"bold",textAlign:"center",color:"white",children:e.username}),(0,d.jsx)(_.MJ,{style:{alignSelf:"center",justifyContent:"center"}})]}),(0,d.jsx)(i.B,{spacing:4,flex:1,justifyContent:"center"})]})]})}},35812:(e,a,r)=>{r.d(a,{l:()=>t,m:()=>i});var n=r(61792),s=r(9950);function t(e){const{loading:a,src:r,srcSet:t,onLoad:i,onError:o,crossOrigin:c,sizes:l,ignoreFallback:d}=e,[u,m]=(0,s.useState)("pending");(0,s.useEffect)((()=>{m(r?"loading":"pending")}),[r]);const g=(0,s.useRef)(),f=(0,s.useCallback)((()=>{if(!r)return;p();const e=new Image;e.src=r,c&&(e.crossOrigin=c),t&&(e.srcset=t),l&&(e.sizes=l),a&&(e.loading=a),e.onload=e=>{p(),m("loaded"),null==i||i(e)},e.onerror=e=>{p(),m("failed"),null==o||o(e)},g.current=e}),[r,c,t,l,i,o,a]),p=()=>{g.current&&(g.current.onload=null,g.current.onerror=null,g.current=null)};return(0,n.U)((()=>{if(!d)return"loading"===u&&f(),()=>{p()}}),[u,f,d]),d?"loaded":u}var i=(e,a)=>"loaded"!==e&&"beforeLoadOrError"===a||"failed"===e&&"onError"===a},3731:(e,a,r)=>{r.d(a,{E:()=>l});var n=r(58039),s=r(66296),t=r(82867),i=r(26306),o=r(97681);var c=r(44414),l=(0,n.R)((function(e,a){const r=(0,s.Vl)("Text",e),{className:n,align:l,decoration:d,casing:u,...m}=(0,t.MN)(e),g=function(e){const a=Object.assign({},e);for(let r in a)void 0===a[r]&&delete a[r];return a}({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,c.jsx)(i.B.p,{ref:a,className:(0,o.cx)("chakra-text",e.className),...g,...m,__css:r})}));l.displayName="Text"}}]);