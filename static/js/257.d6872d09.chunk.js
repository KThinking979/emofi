"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[257],{70712:(e,r,a)=>{a.d(r,{kg:()=>o,Y_:()=>i,wz:()=>c,yg:()=>m,Up:()=>h,uI:()=>d,lC:()=>u,TK:()=>l});var s=a(66220);const t=(0,a(90815).Wp)({apiKey:"AIzaSyDObaXpbUavftTDCAhFmn23akCVpB4cH80",authDomain:"emofi-899d2.firebaseapp.com",projectId:"emofi-899d2",storageBucket:"emofi-899d2.appspot.com",messagingSenderId:"1099226012033",appId:"1:1099226012033:web:2f45b63625daf850bc7080",measurementId:"G-JLXM3H2L66"}),n=(0,s.aU)(t),i=async()=>{try{let e;const r=(0,s.H9)(n,"configs","configs"),a=await(0,s.x7)(r);return a.exists()&&(e=a.data()),e}catch(e){console.error("Error getUser: ",e)}},o=async e=>{let{id:r,username:a,emoFiCoins:t}=e;try{const e=(new Date).toISOString().slice(0,10).replace("-","").replace("-","");await(0,s.BN)((0,s.H9)(n,"users","".concat(r)),{id:"".concat(r),username:a,emoFiCoins:t,scores:0,bestGoal:0,numAds:1,language:"en",faceEmo:"S0",emojis:["S0"],anys:[],skills:[],cards:[],expDateAds:e,createdAt:new Date,updateAt:new Date})}catch(i){console.error("Error createUser: ",i)}},c=async e=>{try{let r;const a=(0,s.H9)(n,"users","".concat(e)),t=await(0,s.x7)(a);return t.exists()&&(r=t.data()),r}catch(r){console.error("Error getUser: ",r)}},l=async e=>{let{id:r,coins:a,scores:t,bestGoal:i,faceEmo:o,numAds:c,expDateAds:l,numClaimDay:d,transactionId:m}=e;try{let e={};null!==a&&void 0!==a&&(e={...e,emoFiCoins:a}),null!==t&&void 0!==t&&(e={...e,scores:t}),null!==i&&void 0!==i&&(e={...e,bestGoal:i}),null!==c&&void 0!==c&&(e={...e,numAds:c}),null!==l&&void 0!==l&&(e={...e,expDateAds:l}),null!==d&&void 0!==d&&(e={...e,numClaimDay:d}),o&&(e={...e,faceEmo:o}),m&&(e={...e,transactionId:m,updateAtTrans:"PAY_".concat(new Date)}),await(0,s.mZ)((0,s.H9)(n,"users","".concat(r)),{...e,updateAt:new Date})}catch(u){console.error("Error updateCoinsUser: ",u)}},d=async e=>{let{id:r,emojis:a}=e;try{await(0,s.mZ)((0,s.H9)(n,"users","".concat(r)),{emojis:a,updateAt:new Date})}catch(t){console.error("Error updateCoinsUser: ",t)}},m=async e=>{let{id:r,anys:a}=e;try{await(0,s.mZ)((0,s.H9)(n,"users","".concat(r)),{anys:a,updateAt:new Date})}catch(t){console.error("Error updateCoinsUser: ",t)}},u=async e=>{let{id:r,skills:a}=e;try{await(0,s.mZ)((0,s.H9)(n,"users","".concat(r)),{skills:a,updateAt:new Date})}catch(t){console.error("Error updateCoinsUser: ",t)}},h=async e=>{let{id:r,cards:a}=e;try{await(0,s.mZ)((0,s.H9)(n,"users","".concat(r)),{cards:a,updateAt:new Date})}catch(t){console.error("Error updateCoinsUser: ",t)}}},37257:(e,r,a)=>{a.r(r),a.d(r,{WalletPage:()=>z});var s=a(9950),t=a(76455),n=a(63247),i=a(81389),o=a(97681),c=a(58039),l=a(26306),d=a(44414);(0,c.R)((function(e,r){const{spacing:a="0.5rem",spacingX:t,spacingY:n,children:i,justify:c,direction:u,align:h,className:p,shouldWrapChildren:g,...x}=e,f=(0,s.useMemo)((()=>g?s.Children.map(i,((e,r)=>(0,d.jsx)(m,{children:e},r))):i),[i,g]);return(0,d.jsx)(l.B.div,{ref:r,className:(0,o.cx)("chakra-wrap",p),...x,children:(0,d.jsx)(l.B.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:c,alignItems:h,flexDirection:u,listStyleType:"none",gap:a,columnGap:t,rowGap:n,padding:"0"},children:f})})})).displayName="Wrap";var m=(0,c.R)((function(e,r){const{className:a,...s}=e;return(0,d.jsx)(l.B.li,{ref:r,__css:{display:"flex",alignItems:"flex-start"},className:(0,o.cx)("chakra-wrap__listitem",a),...s})}));m.displayName="WrapItem";var u=a(80221),[h,p]=(0,u.q)({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"});function g(e){var r;const a=e.split(" "),s=null!=(r=a[0])?r:"",t=a.length>1?a[a.length-1]:"";return s&&t?"".concat(s.charAt(0)).concat(t.charAt(0)):s.charAt(0)}function x(e){const{name:r,getInitials:a,...s}=e,t=p();return(0,d.jsx)(l.B.div,{role:"img","aria-label":r,...s,__css:t.label,children:r?null==a?void 0:a(r):null})}x.displayName="AvatarName";var f=e=>(0,d.jsxs)(l.B.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...e,children:[(0,d.jsx)("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),(0,d.jsx)("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]}),y=a(35812);function b(e){const{src:r,srcSet:a,onError:t,onLoad:n,getInitials:i,name:o,borderRadius:c,loading:m,iconLabel:u,icon:h=(0,d.jsx)(f,{}),ignoreFallback:p,referrerPolicy:g,crossOrigin:b}=e,j=(0,y.l)({src:r,onError:t,crossOrigin:b,ignoreFallback:p});return!r||!("loaded"===j)?o?(0,d.jsx)(x,{className:"chakra-avatar__initials",getInitials:i,name:o}):(0,s.cloneElement)(h,{role:"img","aria-label":u}):(0,d.jsx)(l.B.img,{src:r,srcSet:a,alt:o,onLoad:n,referrerPolicy:g,crossOrigin:null!=b?b:void 0,className:"chakra-avatar__img",loading:m,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:c}})}b.displayName="AvatarImage";var j=a(66296),w=a(82867),v={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},C=(0,c.R)(((e,r)=>{const a=(0,j.o5)("Avatar",e),[t,n]=(0,s.useState)(!1),{src:i,srcSet:c,name:m,showBorder:u,borderRadius:p="full",onError:x,onLoad:y,getInitials:C=g,icon:A=(0,d.jsx)(f,{}),iconLabel:_=" avatar",loading:N,children:k,borderColor:S,ignoreFallback:I,crossOrigin:W,referrerPolicy:E,...D}=(0,w.MN)(e),B={borderRadius:p,borderWidth:u?"2px":void 0,...v,...a.container};return S&&(B.borderColor=S),(0,d.jsx)(l.B.span,{ref:r,...D,className:(0,o.cx)("chakra-avatar",e.className),"data-loaded":(0,o.sE)(t),__css:B,children:(0,d.jsxs)(h,{value:a,children:[(0,d.jsx)(b,{src:i,srcSet:c,loading:N,onLoad:(0,o.Hj)(y,(()=>{n(!0)})),onError:x,getInitials:C,name:m,borderRadius:p,icon:A,iconLabel:_,ignoreFallback:I,crossOrigin:W,referrerPolicy:E}),k]})})}));C.displayName="Avatar";var A=a(31317),_=a(34418),N=a(66086),k=a(46569),S=a(52720),I=a(20393),W=a(22238),E=a(93660),D=a(70712),B=a(17156);let F=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const z=()=>{const{user:e}=(0,s.useContext)(W.j8),{setUser:r}=s.useContext(W.LN);(0,s.useEffect)((()=>{o(),(async()=>{var a;const s=null===(a=window.Telegram)||void 0===a?void 0:a.WebApp;if(s&&!e){s.ready();const e=s.initDataUnsafe.user;if(e){let a={id:e.id,username:"".concat(e.last_name," ").concat(e.first_name),emoFiCoins:0};const s=await(0,D.wz)(a.id);s?a={...a,emoFiCoins:s.emoFiCoins}:await(0,D.kg)(a),r(a)}}})()}),[]);const o=async()=>{};return(0,d.jsxs)(n.az,{children:[(0,d.jsxs)(t.mg,{children:[(0,d.jsx)("title",{children:"Wallet"}),(0,d.jsx)("meta",{name:"description",content:"EmoFi"})]}),(0,d.jsxs)(i.B,{h:"100vh",w:F,py:20,px:2,spacing:8,children:[e&&(0,d.jsxs)(i.B,{borderRadius:8,p:2,spacing:4,alignItems:"center",children:[(0,d.jsx)(m,{children:(0,d.jsx)(C,{size:"xl",name:e.username,src:""})}),(0,d.jsx)(A.E,{fontSize:"16px",lineHeight:"20px",fontWeight:"bold",textAlign:"center",color:"white",children:e.username}),(0,d.jsx)(E.MJ,{style:{alignSelf:"center",justifyContent:"center"}})]}),(0,d.jsxs)(i.B,{spacing:4,borderRadius:8,borderColor:"gray.800",borderWidth:2,px:2,py:4,children:[(0,d.jsx)(i.B,{spacing:4,children:(0,d.jsx)(_.z,{spacing:2,justifyContent:"space-between",children:(0,d.jsxs)(_.z,{children:[(0,d.jsx)(A.E,{color:"white",fontSize:14,fontWeight:"700",children:"Coins: ".concat(e&&e.emoFiCoins?(new Intl.NumberFormat).format(e.emoFiCoins):0)}),(0,d.jsx)(N.o,{children:(0,d.jsx)(k._,{boxSize:"18px",src:a(42975),alt:"card"})})]})})}),(0,d.jsxs)(i.B,{spacing:4,children:[(0,d.jsx)(S.c,{colorScheme:"gray"}),(0,d.jsx)(_.z,{spacing:2,justifyContent:"space-between",children:(0,d.jsxs)(_.z,{children:[(0,d.jsx)(A.E,{color:"white",fontSize:14,fontWeight:"700",children:"Scores: ".concat(e&&e.scores?(new Intl.NumberFormat).format(e.scores):0)}),(0,d.jsx)(I.I,{color:"Cyan",as:B.y4G,boxSize:5})]})})]})]})]})]})}},42975:(e,r,a)=>{e.exports=a.p+"static/media/coin.84cf06a861a4cfb9ad42.png"},52720:(e,r,a)=>{a.d(r,{c:()=>l});var s=a(58039),t=a(66296),n=a(82867),i=a(26306),o=a(97681),c=a(44414),l=(0,s.R)((function(e,r){const{borderLeftWidth:a,borderBottomWidth:s,borderTopWidth:l,borderRightWidth:d,borderWidth:m,borderStyle:u,borderColor:h,...p}=(0,t.Vl)("Divider",e),{className:g,orientation:x="horizontal",__css:f,...y}=(0,n.MN)(e),b={vertical:{borderLeftWidth:a||d||m||"1px",height:"100%"},horizontal:{borderBottomWidth:s||l||m||"1px",width:"100%"}};return(0,c.jsx)(i.B.hr,{ref:r,"aria-orientation":x,...y,__css:{...p,border:"0",borderColor:h,borderStyle:u,...b[x],...f},className:(0,o.cx)("chakra-divider",g)})}));l.displayName="Divider"}}]);