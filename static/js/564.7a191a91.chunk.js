"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[564],{70712:(e,s,n)=>{n.d(s,{kg:()=>c,Y_:()=>r,wz:()=>a,yg:()=>x,uI:()=>l,TK:()=>d});var o=n(66220);const i=(0,n(90815).Wp)({apiKey:"AIzaSyDObaXpbUavftTDCAhFmn23akCVpB4cH80",authDomain:"emofi-899d2.firebaseapp.com",projectId:"emofi-899d2",storageBucket:"emofi-899d2.appspot.com",messagingSenderId:"1099226012033",appId:"1:1099226012033:web:2f45b63625daf850bc7080",measurementId:"G-JLXM3H2L66"}),t=(0,o.aU)(i),r=async()=>{try{let e;const s=(0,o.H9)(t,"configs","configs"),n=await(0,o.x7)(s);return n.exists()&&(e=n.data()),e}catch(e){console.error("Error getUser: ",e)}},c=async e=>{let{id:s,username:n,emoFiCoins:i}=e;try{const e=(new Date).toISOString().slice(0,10).replace("-","").replace("-","");await(0,o.BN)((0,o.H9)(t,"users","".concat(s)),{id:"".concat(s),username:n,emoFiCoins:i,bestGoal:0,numAds:1,language:"en",faceEmo:"S0",emojis:["S0"],anys:[],skills:[],cards:[],expDateAds:e,createdAt:new Date,updateAt:new Date})}catch(r){console.error("Error createUser: ",r)}},a=async e=>{try{let s;const n=(0,o.H9)(t,"users","".concat(e)),i=await(0,o.x7)(n);return i.exists()&&(s=i.data()),s}catch(s){console.error("Error getUser: ",s)}},d=async e=>{let{id:s,coins:n,bestGoal:i,faceEmo:r,numAds:c,expDateAds:a,transactionId:d}=e;try{let e={};null!==n&&void 0!==n&&(e={...e,emoFiCoins:n}),null!==i&&void 0!==i&&(e={...e,bestGoal:i}),null!==c&&void 0!==c&&(e={...e,numAds:c}),null!==a&&void 0!==a&&(e={...e,expDateAds:a}),r&&(e={...e,faceEmo:r}),d&&(e={...e,transactionId:d,updateAtTrans:"PAY_".concat(new Date)}),await(0,o.mZ)((0,o.H9)(t,"users","".concat(s)),{...e,updateAt:new Date})}catch(l){console.error("Error updateCoinsUser: ",l)}},l=async e=>{let{id:s,emojis:n}=e;try{await(0,o.mZ)((0,o.H9)(t,"users","".concat(s)),{emojis:n,updateAt:new Date})}catch(i){console.error("Error updateCoinsUser: ",i)}},x=async e=>{let{id:s,anys:n}=e;try{await(0,o.mZ)((0,o.H9)(t,"users","".concat(s)),{anys:n,updateAt:new Date})}catch(i){console.error("Error updateCoinsUser: ",i)}}},90564:(e,s,n)=>{n.r(s),n.d(s,{EarnPage:()=>A});var o=n(9950),i=n(76455),t=n(22099),r=n(63247),c=n(61530),a=n(81374),d=n(66086),l=n(46569),x=n(3731),p=n(34418),h=n(20393),u=n(47738),j=n(21642),g=n(82096),m=n(22238),f=n(42935),w=n(70712),b=n(44414);let z=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const A=()=>{const e=(0,t.d)(),{user:s,configs:A}=o.useContext(m.j8),{setUser:S}=o.useContext(m.LN),[y,C]=(0,o.useState)(s&&s.numAds?s.numAds:1),[E,k]=(0,o.useState)(25);(0,o.useEffect)((()=>{D(),(async()=>{var e;const n=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;if(n&&!s){n.ready();const e=n.initDataUnsafe.user;if(e){let s={id:e.id,username:"".concat(e.last_name," ").concat(e.first_name),emoFiCoins:0};const n=await(0,w.wz)(s.id);n?s={...s,emoFiCoins:n.emoFiCoins}:await(0,w.kg)(s),S(s)}}})()}),[]);const D=async()=>{if(A&&s){const e=parseInt((new Date).toISOString().slice(0,10).replace("-","").replace("-",""));if(e>s.expDateAds)k(A.coinAds+A.disAds),C(1),S({...s,numAds:1,expDateAds:e}),(0,w.TK)({id:s.id,numAds:1,expDateAds:e});else{const e=A.coinAds+A.disAds*s.numAds;k(e)}}};return(0,b.jsxs)(r.az,{children:[(0,b.jsxs)(i.mg,{children:[(0,b.jsx)("title",{children:"Earn"}),(0,b.jsx)("meta",{name:"description",content:"EmoFi"})]}),(0,b.jsxs)(c.B,{h:"100vh",w:z,py:20,px:2,spacing:8,children:[(0,b.jsxs)(c.B,{borderRadius:8,p:2,spacing:4,alignItems:"center",children:[(0,b.jsx)(a.$,{colorScheme:"yellow",borderColor:"yellow.400",variant:"outline",borderRadius:"full",boxSize:40,borderWidth:4,_hover:{backgroundColor:"back"},onClick:async()=>{const n=Object.keys(A.ADS).length,o=y<=n?A.ADS["".concat(y)]:A.ADS["".concat(y%n===0?n:y%n)];window.Adsgram.init({blockId:o}).show().then((n=>{let o=y+1,i=A.coinAds+A.disAds*o;i>A.maxCoinAds&&(i=A.maxCoinAds,o=y);const t=s.emoFiCoins+E;(0,w.TK)({id:s.id,numAds:o,coins:t}),S({...s,numAds:o,emoFiCoins:t}),C(o),k(i),e({title:"Added Coin",status:"success",position:"top",isClosable:!0})})).catch((e=>{console.log("result ",e)}))},children:(0,b.jsxs)(c.B,{children:[(0,b.jsx)(d.o,{children:(0,b.jsx)(l._,{boxSize:"40px",src:n(87120),alt:"card"})}),(0,b.jsx)(x.E,{fontSize:"20px",fontWeight:"bold",lineHeight:"20px",textTransform:"uppercase",textAlign:"center",color:"white",children:"+".concat(E)})]})}),(0,b.jsx)(x.E,{fontSize:"20px",fontWeight:"bold",lineHeight:"20px",textTransform:"uppercase",textAlign:"center",color:"white",children:"Watch To Earn"})]}),(0,b.jsxs)(c.B,{spacing:4,children:[(0,b.jsxs)(p.z,{spacing:2,children:[(0,b.jsx)(h.I,{color:"white",as:u.ykL,boxSize:6}),(0,b.jsx)(x.E,{color:"white",fontSize:16,fontWeight:"700",children:"Friends"})]}),(0,b.jsx)(a.$,{leftIcon:(0,b.jsx)(f.rYN,{size:18}),colorScheme:"pink",variant:"solid",borderRadius:"full",fontSize:14,children:"Add Friend"})]}),(0,b.jsxs)(c.B,{spacing:4,pb:40,children:[(0,b.jsxs)(p.z,{spacing:2,children:[(0,b.jsx)(h.I,{color:"white",as:j.aBs,boxSize:6}),(0,b.jsx)(x.E,{color:"white",fontSize:16,fontWeight:"700",children:"Tasks"})]}),(0,b.jsxs)(c.B,{spacing:6,children:[(0,b.jsxs)(p.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,b.jsx)(x.E,{color:"white",fontSize:14,children:"Task 1"}),(0,b.jsxs)(p.z,{spacing:4,children:[(0,b.jsxs)(p.z,{children:[(0,b.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"100"}),(0,b.jsx)(d.o,{children:(0,b.jsx)(l._,{boxSize:"16px",src:n(87120),alt:"coin"})})]}),(0,b.jsx)(h.I,{color:"green.400",as:g.dA7,boxSize:6})]})]}),(0,b.jsxs)(p.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,b.jsx)(x.E,{color:"white",fontSize:14,children:"Task 2"}),(0,b.jsxs)(p.z,{spacing:4,children:[(0,b.jsxs)(p.z,{children:[(0,b.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"200"}),(0,b.jsx)(d.o,{children:(0,b.jsx)(l._,{boxSize:"16px",src:n(87120),alt:"coin"})})]}),(0,b.jsx)(h.I,{color:"white",as:g.OQo,boxSize:6})]})]}),(0,b.jsxs)(p.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,b.jsx)(x.E,{color:"white",fontSize:14,children:"Task 3"}),(0,b.jsxs)(p.z,{spacing:4,children:[(0,b.jsxs)(p.z,{children:[(0,b.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"300"}),(0,b.jsx)(d.o,{children:(0,b.jsx)(l._,{boxSize:"16px",src:n(87120),alt:"coin"})})]}),(0,b.jsx)(h.I,{color:"green.400",as:g.dA7,boxSize:6})]})]}),(0,b.jsxs)(p.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,b.jsx)(x.E,{color:"white",fontSize:14,children:"Task 4"}),(0,b.jsxs)(p.z,{spacing:4,children:[(0,b.jsxs)(p.z,{children:[(0,b.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"400"}),(0,b.jsx)(d.o,{children:(0,b.jsx)(l._,{boxSize:"16px",src:n(87120),alt:"coin"})})]}),(0,b.jsx)(h.I,{color:"white",as:g.OQo,boxSize:6})]})]}),(0,b.jsxs)(p.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,b.jsx)(x.E,{color:"white",fontSize:14,children:"Task 5"}),(0,b.jsxs)(p.z,{spacing:4,children:[(0,b.jsxs)(p.z,{children:[(0,b.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"500"}),(0,b.jsx)(d.o,{children:(0,b.jsx)(l._,{boxSize:"16px",src:n(87120),alt:"coin"})})]}),(0,b.jsx)(h.I,{color:"green.400",as:g.dA7,boxSize:6})]})]})]})]})]})]})}},87120:(e,s,n)=>{e.exports=n.p+"static/media/coin.84cf06a861a4cfb9ad42.png"}}]);