"use strict";(self.webpackChunkemojifi=self.webpackChunkemojifi||[]).push([[564],{70712:(e,s,t)=>{t.d(s,{kg:()=>c,Y_:()=>r,wz:()=>a,yg:()=>x,uI:()=>l,TK:()=>d});var n=t(66220);const i=(0,t(90815).Wp)({apiKey:"AIzaSyDObaXpbUavftTDCAhFmn23akCVpB4cH80",authDomain:"emofi-899d2.firebaseapp.com",projectId:"emofi-899d2",storageBucket:"emofi-899d2.appspot.com",messagingSenderId:"1099226012033",appId:"1:1099226012033:web:2f45b63625daf850bc7080",measurementId:"G-JLXM3H2L66"}),o=(0,n.aU)(i),r=async()=>{try{let e;const s=(0,n.H9)(o,"configs","configs"),t=await(0,n.x7)(s);return t.exists()&&(e=t.data()),e}catch(e){console.error("Error getUser: ",e)}},c=async e=>{let{id:s,username:t,emoFiCoins:i}=e;try{const e=(new Date).toISOString().slice(0,10).replace("-","").replace("-","");await(0,n.BN)((0,n.H9)(o,"users","".concat(s)),{id:"".concat(s),username:t,emoFiCoins:i,bestGoal:0,numAds:1,language:"en",faceEmo:"S0",emojis:["S0"],anys:[],skills:[],cards:[],expDateAds:e,createdAt:new Date,updateAt:new Date})}catch(r){console.error("Error createUser: ",r)}},a=async e=>{try{let s;const t=(0,n.H9)(o,"users","".concat(e)),i=await(0,n.x7)(t);return i.exists()&&(s=i.data()),s}catch(s){console.error("Error getUser: ",s)}},d=async e=>{let{id:s,coins:t,bestGoal:i,faceEmo:r,numAds:c,expDateAds:a,numClaimDay:d,transactionId:l}=e;try{let e={};null!==t&&void 0!==t&&(e={...e,emoFiCoins:t}),null!==i&&void 0!==i&&(e={...e,bestGoal:i}),null!==c&&void 0!==c&&(e={...e,numAds:c}),null!==a&&void 0!==a&&(e={...e,expDateAds:a}),null!==d&&void 0!==d&&(e={...e,numClaimDay:d}),r&&(e={...e,faceEmo:r}),l&&(e={...e,transactionId:l,updateAtTrans:"PAY_".concat(new Date)}),await(0,n.mZ)((0,n.H9)(o,"users","".concat(s)),{...e,updateAt:new Date})}catch(x){console.error("Error updateCoinsUser: ",x)}},l=async e=>{let{id:s,emojis:t}=e;try{await(0,n.mZ)((0,n.H9)(o,"users","".concat(s)),{emojis:t,updateAt:new Date})}catch(i){console.error("Error updateCoinsUser: ",i)}},x=async e=>{let{id:s,anys:t}=e;try{await(0,n.mZ)((0,n.H9)(o,"users","".concat(s)),{anys:t,updateAt:new Date})}catch(i){console.error("Error updateCoinsUser: ",i)}}},90564:(e,s,t)=>{t.r(s),t.d(s,{EarnPage:()=>k});var n=t(9950),i=t(76455),o=t(22099),r=t(63247),c=t(81389),a=t(81374),d=t(66086),l=t(46569),x=t(31317),h=t(34418),p=t(20393),u=t(92481),j=t(672),g=t(52720),m=t(47738),f=t(21642),b=t(82096),w=t(22238),y=t(42935),z=t(29949),A=t(70712),S=t(59051),C=t.n(S),E=t(44414);let D=window.innerWidth>500?500:window.innerWidth;window.innerHeight;const I=[{id:"0",title:"Sun",status:"",coins:20,day:0},{id:"1",title:"Mon",status:"CANCEL",coins:30,day:1},{id:"2",title:"Tue",status:"DONE",coins:40,day:2},{id:"3",title:"Wed",status:"WAIT",coins:50,day:3},{id:"4",title:"Thu",status:"",coins:60,day:4},{id:"5",title:"Fri",status:"",coins:70,day:5},{id:"6",title:"Sat",status:"",coins:100,day:6}],k=()=>{const e=(0,o.d)(),{user:s,configs:S}=n.useContext(w.j8),{setUser:k}=n.useContext(w.LN),[T,W]=(0,n.useState)(s&&s.numAds?s.numAds:1),[v,F]=(0,n.useState)(25),[B,H]=(0,n.useState)([]),N=C()().day();(0,n.useEffect)((()=>{_(),O()}),[]);const _=async()=>{if(S&&s){const e=parseInt((new Date).toISOString().slice(0,10).replace("-","").replace("-",""));if(e>s.expDateAds)F(S.coinAds+S.disAds),W(1),k({...s,numAds:1,expDateAds:e}),(0,A.TK)({id:s.id,numAds:1,expDateAds:e});else{const e=S.coinAds+S.disAds*s.numAds;F(e)}}const e=I.map((e=>{let s=e.status;return N===e.day&&"DONE"!==s&&"CANCEL"!==s&&(s="WAIT"),e.day<N&&"DONE"!==s&&(s="CANCEL"),e.day>N&&(s=""),{...e,status:s}}));H(e)},O=async()=>{var e;const t=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp;if(t&&!s){t.ready();const e=t.initDataUnsafe.user;if(e){let s={id:e.id,username:"".concat(e.last_name," ").concat(e.first_name),emoFiCoins:0};const t=await(0,A.wz)(s.id);t?s={...s,emoFiCoins:t.emoFiCoins}:await(0,A.kg)(s),k(s)}}};return(0,E.jsxs)(r.az,{children:[(0,E.jsxs)(i.mg,{children:[(0,E.jsx)("title",{children:"Earn"}),(0,E.jsx)("meta",{name:"description",content:"EmoFi"})]}),(0,E.jsxs)(c.B,{h:"100vh",w:D,py:20,px:2,spacing:8,children:[(0,E.jsxs)(c.B,{borderRadius:8,p:2,spacing:4,alignItems:"center",children:[(0,E.jsx)(a.$,{colorScheme:"yellow",borderColor:"yellow.400",variant:"outline",borderRadius:"full",boxSize:40,borderWidth:4,_hover:{backgroundColor:"back"},onClick:async()=>{const t=Object.keys(S.ADS).length,n=T<=t?S.ADS["".concat(T)]:S.ADS["".concat(T%t===0?t:T%t)];window.Adsgram.init({blockId:n}).show().then((t=>{let n=T+1,i=S.coinAds+S.disAds*n;i>S.maxCoinAds&&(i=S.maxCoinAds,n=T);const o=s.emoFiCoins+v;(0,A.TK)({id:s.id,numAds:n,coins:o}),k({...s,numAds:n,emoFiCoins:o}),W(n),F(i),e({title:"Added Coin",status:"success",position:"top",isClosable:!0})})).catch((e=>{console.log("result ",e)}))},children:(0,E.jsxs)(c.B,{children:[(0,E.jsx)(d.o,{children:(0,E.jsx)(l._,{boxSize:"40px",src:t(87120),alt:"card"})}),(0,E.jsx)(x.E,{fontSize:"20px",fontWeight:"bold",lineHeight:"20px",textTransform:"uppercase",textAlign:"center",color:"white",children:"+".concat(v)})]})}),(0,E.jsx)(x.E,{fontSize:"20px",fontWeight:"bold",lineHeight:"20px",textTransform:"uppercase",textAlign:"center",color:"white",children:"Watch To Earn"})]}),(0,E.jsxs)(c.B,{spacing:4,children:[(0,E.jsxs)(h.z,{spacing:2,children:[(0,E.jsx)(p.I,{color:"white",as:m.ykL,boxSize:6}),(0,E.jsx)(x.E,{color:"white",fontSize:16,fontWeight:"700",children:"Friends"})]}),(0,E.jsx)(a.$,{leftIcon:(0,E.jsx)(y.rYN,{size:18}),colorScheme:"pink",variant:"solid",borderRadius:"full",fontSize:14,children:"Add Friend"})]}),(0,E.jsxs)(c.B,{spacing:4,children:[(0,E.jsxs)(c.B,{children:[(0,E.jsxs)(h.z,{spacing:2,children:[(0,E.jsx)(p.I,{color:"white",as:z.abJ,boxSize:5}),(0,E.jsx)(x.E,{color:"white",fontSize:16,fontWeight:"700",children:"Daily Check"})]}),(0,E.jsx)(x.E,{color:"gray.400",fontSize:12,children:"Please get 10 scores every day to claim"})]}),(0,E.jsx)(u.x,{templateColumns:"repeat(3, 1fr)",gap:4,children:B.map((e=>(0,E.jsxs)(j.E,{w:"100%",minH:16,borderWidth:1,borderColor:"blue.500",borderRadius:4,alignItems:"center",justifyContent:"center",p:1,children:[(0,E.jsx)(x.E,{textAlign:"center",color:"white",fontSize:14,fontWeight:"700",children:e.title}),(0,E.jsx)(g.c,{mb:2,colorScheme:"gray"}),(0,E.jsxs)(h.z,{w:"100%",alignItems:"center",justifyContent:"center",spacing:4,children:[(0,E.jsxs)(h.z,{spacing:1,display:"CANCEL"===e.status?"none":"flex",children:[(0,E.jsx)(x.E,{fontSize:13,textTransform:"uppercase",textAlign:"center",color:"white",children:e.coins}),(0,E.jsx)(d.o,{children:(0,E.jsx)(l._,{boxSize:"13px",src:t(87120),alt:"coin"})})]}),"WAIT"===e.status&&(0,E.jsx)(a.$,{colorScheme:"purple",size:"xs",isDisabled:!s||s.numClaimDay!==N,children:"Claim"}),"DONE"===e.status&&(0,E.jsx)(p.I,{color:"green.400",as:b.dA7,boxSize:5}),"CANCEL"===e.status&&(0,E.jsx)(p.I,{color:"red.400",as:b.qpF,boxSize:5})]})]},e.id)))})]}),(0,E.jsxs)(c.B,{spacing:4,pb:40,children:[(0,E.jsxs)(h.z,{spacing:2,children:[(0,E.jsx)(p.I,{color:"white",as:f.aBs,boxSize:6}),(0,E.jsx)(x.E,{color:"white",fontSize:16,fontWeight:"700",children:"Tasks"})]}),(0,E.jsxs)(c.B,{spacing:6,children:[(0,E.jsxs)(h.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,E.jsx)(x.E,{color:"white",fontSize:14,children:"Task 1"}),(0,E.jsxs)(h.z,{spacing:4,children:[(0,E.jsxs)(h.z,{children:[(0,E.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"100"}),(0,E.jsx)(d.o,{children:(0,E.jsx)(l._,{boxSize:"16px",src:t(87120),alt:"coin"})})]}),(0,E.jsx)(p.I,{color:"green.400",as:b.dA7,boxSize:6})]})]}),(0,E.jsxs)(h.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,E.jsx)(x.E,{color:"white",fontSize:14,children:"Task 2"}),(0,E.jsxs)(h.z,{spacing:4,children:[(0,E.jsxs)(h.z,{children:[(0,E.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"200"}),(0,E.jsx)(d.o,{children:(0,E.jsx)(l._,{boxSize:"16px",src:t(87120),alt:"coin"})})]}),(0,E.jsx)(p.I,{color:"white",as:b.OQo,boxSize:6})]})]}),(0,E.jsxs)(h.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,E.jsx)(x.E,{color:"white",fontSize:14,children:"Task 3"}),(0,E.jsxs)(h.z,{spacing:4,children:[(0,E.jsxs)(h.z,{children:[(0,E.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"300"}),(0,E.jsx)(d.o,{children:(0,E.jsx)(l._,{boxSize:"16px",src:t(87120),alt:"coin"})})]}),(0,E.jsx)(p.I,{color:"green.400",as:b.dA7,boxSize:6})]})]}),(0,E.jsxs)(h.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,E.jsx)(x.E,{color:"white",fontSize:14,children:"Task 4"}),(0,E.jsxs)(h.z,{spacing:4,children:[(0,E.jsxs)(h.z,{children:[(0,E.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"400"}),(0,E.jsx)(d.o,{children:(0,E.jsx)(l._,{boxSize:"16px",src:t(87120),alt:"coin"})})]}),(0,E.jsx)(p.I,{color:"white",as:b.OQo,boxSize:6})]})]}),(0,E.jsxs)(h.z,{spacing:2,px:4,py:4,borderRadius:16,backgroundColor:"gray.700",justifyContent:"space-between",children:[(0,E.jsx)(x.E,{color:"white",fontSize:14,children:"Task 5"}),(0,E.jsxs)(h.z,{spacing:4,children:[(0,E.jsxs)(h.z,{children:[(0,E.jsx)(x.E,{fontSize:14,textTransform:"uppercase",textAlign:"center",color:"white",children:"500"}),(0,E.jsx)(d.o,{children:(0,E.jsx)(l._,{boxSize:"16px",src:t(87120),alt:"coin"})})]}),(0,E.jsx)(p.I,{color:"green.400",as:b.dA7,boxSize:6})]})]})]})]})]})]})}},87120:(e,s,t)=>{e.exports=t.p+"static/media/coin.84cf06a861a4cfb9ad42.png"}}]);